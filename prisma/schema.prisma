generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model comment {
  com_id         Int      @id @default(autoincrement())
  com_task_id    Int
  com_content    String   @db.VarChar(2000)
  com_created_by Int
  com_created_on DateTime @db.DateTime(0)
  task           task     @relation(fields: [com_task_id], references: [tsk_id], onUpdate: Restrict, map: "comment_task_tsk_id_fk")
  user           user     @relation(fields: [com_created_by], references: [usr_id], onUpdate: Restrict, map: "comment_user_usr_id_fk")

  @@index([com_task_id], map: "comment_task_tsk_id_fk")
  @@index([com_created_by], map: "comment_user_usr_id_fk")
}

model profile_picture {
  pic_id         Int       @id
  pic_user_id    Int
  pic_filename   String?   @db.VarChar(50)
  pic_filetype   String?   @db.VarChar(5)
  pic_updated_on DateTime? @db.DateTime(0)
  user           user      @relation(fields: [pic_user_id], references: [usr_id], onUpdate: Restrict, map: "user_picture_user_usr_id_fk")

  @@index([pic_user_id], map: "user_picture_user_usr_id_fk")
}

model project {
  proj_id          Int      @id @default(autoincrement())
  proj_name        String   @db.VarChar(30)
  proj_created_on  DateTime @db.DateTime(0)
  proj_modified_on DateTime @db.DateTime(0)
  proj_created_by  Int
  proj_is_active   Boolean
  user             user     @relation(fields: [proj_created_by], references: [usr_id], onUpdate: Restrict, map: "project_user_usr_id_fk")
  status           status[]
  task             task[]

  @@index([proj_created_by], map: "project_user_usr_id_fk")
}

model status {
  stat_id         Int      @id
  stat_name       String   @db.VarChar(100)
  stat_order      Int
  stat_project_id Int?
  project         project? @relation(fields: [stat_project_id], references: [proj_id], onDelete: Restrict, onUpdate: Restrict, map: "task_status_project_proj_id_fk")
  task            task[]

  @@index([stat_project_id], map: "task_status_project_proj_id_fk")
}

model task {
  tsk_id                      Int       @id @default(autoincrement())
  tsk_name                    String    @db.VarChar(100)
  tsk_project_id              Int
  tsk_status_id               Int
  tsk_due_time_date           DateTime? @db.DateTime(0)
  tsk_is_time_defined_by_user Boolean
  tsk_created_on              DateTime  @db.DateTime(0)
  tsk_modified_on             DateTime? @db.DateTime(0)
  tsk_complete_on             DateTime? @db.DateTime(0)
  tsk_created_by              Int
  tsk_is_active               Boolean
  comment                     comment[]
  project                     project   @relation(fields: [tsk_project_id], references: [proj_id], onUpdate: Restrict, map: "task_project_proj_id_fk")
  status                      status    @relation(fields: [tsk_status_id], references: [stat_id], onUpdate: Restrict, map: "task_status_stat_id_fk")
  user                        user      @relation(fields: [tsk_created_by], references: [usr_id], onUpdate: Restrict, map: "task_user_usr_id_fk")

  @@index([tsk_project_id], map: "task_project_proj_id_fk")
  @@index([tsk_status_id], map: "task_status_stat_id_fk")
  @@index([tsk_created_by], map: "task_user_usr_id_fk")
}

model user {
  usr_id            Int               @id
  usr_name          String            @db.VarChar(30)
  usr_username      String            @db.VarChar(30)
  usr_password      String            @db.VarChar(35)
  usr_email         String            @db.VarChar(30)
  usr_creation_date DateTime          @db.DateTime(0)
  usr_last_login    DateTime          @db.DateTime(0)
  usr_is_active     DateTime          @db.DateTime(0)
  comment           comment[]
  profile_picture   profile_picture[]
  project           project[]
  task              task[]
}